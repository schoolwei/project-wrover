(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{411:function(e,r,t){Promise.resolve().then(t.bind(t,9657))},9657:function(e,r,t){"use strict";let n;t.r(r),t.d(r,{default:function(){return M}});var a,s,l=t(3827),i=t(7815),o=t(1962);async function c(e){return n||(n=d(e))}async function d(e){console.log("connect web socket",e);let r=new WebSocket("ws://".concat(e,"/ws"));o.R$.tap(function(e,t){r.send(JSON.stringify({type:e,...t}))}),r.onmessage=e=>{if("string"==typeof e.data)try{let r=JSON.parse(e.data);o.y8.emit(r.type,r)}catch(e){console.error(e)}else o.y8.emit("binaryData",e.data)},await Promise.race([o.y8.wait("socketReady"),new Promise((e,t)=>{r.onerror=t})]),await new Promise(e=>setTimeout(e,100))}var u=t(7907),f=t(4090),_=t(5754),m=t(5179),x=t(9842),v=t(8998),E=t(7929);function g(e){var r;let t=(0,u.useSearchParams)(),n=(0,u.useRouter)(),[a,s]=(0,f.useState)(null!==(r=t.get("ip"))&&void 0!==r?r:""),[d,g]=(0,f.useState)(!1),[p,b]=(0,f.useState)(!1);async function h(r){try{b(!1),g(!0),await c(r),g(!1),e.onConnectionChange(!0)}catch(e){b(!0),g(!1)}}return(0,f.useEffect)(()=>{console.log("use effect running..."),a&&h(a)},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(i.Zb,{className:"border-none shadow-none",children:[(0,l.jsxs)(i.Ol,{children:[(0,l.jsxs)(i.ll,{children:[o.A1," Remote Connection"]}),(0,l.jsxs)(i.SZ,{children:["Connecting to the ",o.A1," remotely. Please make sure you have selected the right network."]})]}),(0,l.jsxs)(i.aY,{children:[p&&(0,l.jsxs)(E.bZ,{variant:"destructive",className:"mb-4",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4"}),(0,l.jsx)(E.Cd,{children:"Error"}),(0,l.jsx)(E.X,{children:"Failed to connect. Please check the IP address and try again."})]}),(0,l.jsxs)(x._,{children:[o.A1," IP Address"]}),(0,l.jsx)(m.I,{disabled:d,className:"mb-4 mt-1",placeholder:"IP Address",value:a,onChange:e=>s(e.currentTarget.value)}),(0,l.jsx)(_.z,{className:"mr-1",onClick:()=>n.replace("/"),children:"Return to Setup"}),(0,l.jsx)(_.z,{disabled:d||!a,onClick:()=>{h(a);let e=new URLSearchParams;e.append("ip",a),n.replace("?"+e.toString())},children:d?"Connecting...":"Connect"})]})]})})}var p=t(9655);function b(e){let[r,t]=(0,f.useState)("");return(0,f.useEffect)(()=>{let e=!0;return async function(){for(;e;){o.R$.emit("capture",{});let e=await Promise.race([o.y8.wait("binaryData"),new Promise(e=>setTimeout(e,100))]);if(e){let n=URL.createObjectURL(e);URL.revokeObjectURL(r),t(n)}}}(),()=>{e=!1,URL.revokeObjectURL(r)}},[]),(0,l.jsx)("img",{src:r,...e})}var h=t(9702),A=t(4067),R=t(2168),S=t(1657);let y=e=>{let{className:r,...t}=e;return(0,l.jsx)(R.eh,{className:(0,S.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",r),...t})},j=R.s_,I=e=>{let{withHandle:r,className:t,...n}=e;return(0,l.jsx)(R.OT,{className:(0,S.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:r&&(0,l.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,l.jsx)(A.Z,{className:"h-2.5 w-2.5"})})})};(a=s||(s={}))[a.FRAMESIZE_96X96=0]="FRAMESIZE_96X96",a[a.FRAMESIZE_QQVGA=1]="FRAMESIZE_QQVGA",a[a.FRAMESIZE_QCIF=2]="FRAMESIZE_QCIF",a[a.FRAMESIZE_HQVGA=3]="FRAMESIZE_HQVGA",a[a.FRAMESIZE_240X240=4]="FRAMESIZE_240X240",a[a.FRAMESIZE_QVGA=5]="FRAMESIZE_QVGA",a[a.FRAMESIZE_CIF=6]="FRAMESIZE_CIF",a[a.FRAMESIZE_HVGA=7]="FRAMESIZE_HVGA",a[a.FRAMESIZE_VGA=8]="FRAMESIZE_VGA",a[a.FRAMESIZE_SVGA=9]="FRAMESIZE_SVGA",a[a.FRAMESIZE_XGA=10]="FRAMESIZE_XGA",a[a.FRAMESIZE_HD=11]="FRAMESIZE_HD",a[a.FRAMESIZE_SXGA=12]="FRAMESIZE_SXGA",a[a.FRAMESIZE_UXGA=13]="FRAMESIZE_UXGA",a[a.FRAMESIZE_FHD=14]="FRAMESIZE_FHD",a[a.FRAMESIZE_P_HD=15]="FRAMESIZE_P_HD",a[a.FRAMESIZE_P_3MP=16]="FRAMESIZE_P_3MP",a[a.FRAMESIZE_QXGA=17]="FRAMESIZE_QXGA",a[a.FRAMESIZE_QHD=18]="FRAMESIZE_QHD",a[a.FRAMESIZE_WQXGA=19]="FRAMESIZE_WQXGA",a[a.FRAMESIZE_P_FHD=20]="FRAMESIZE_P_FHD",a[a.FRAMESIZE_QSXGA=21]="FRAMESIZE_QSXGA",a[a.FRAMESIZE_INVALID=22]="FRAMESIZE_INVALID";let F=[{value:1,label:"160x120"},{value:2,label:"176x144"},{value:3,label:"240x176"},{value:4,label:"240x240"},{value:5,label:"320x240"},{value:6,label:"400x296"},{value:7,label:"480x320"},{value:8,label:"640x480"},{value:9,label:"800x600"}];function Z(){return(0,f.useEffect)(()=>{let e="",r={};function t(e){r[e.key]=!0,a()}function n(e){r[e.key]=!1,a()}function a(){var t;let n=(r.w?"w":"")+(r.a?"a":"")+(r.s?"s":"")+(r.d?"d":"");if(e===n)return;e=n;let a={w:[50,50],a:[-50,50],s:[-50,-50],d:[50,-50],wa:[25,50],wd:[50,25],as:[-25,-50],sd:[-50,-25],zero:[0,0]},s=null!==(t=a[n])&&void 0!==t?t:a.zero;o.R$.emit("motor",{m0:1*s[0],m1:1*s[1]})}return globalThis.addEventListener("keydown",t),globalThis.addEventListener("keyup",n),()=>{globalThis.removeEventListener("keydown",t),globalThis.removeEventListener("keyup",n)}},[]),(0,l.jsx)("div",{className:"h-screen",children:(0,l.jsxs)(y,{direction:"vertical",children:[(0,l.jsx)(j,{children:(0,l.jsx)(h.E,{})}),(0,l.jsx)(I,{className:"bg-slate-500"}),(0,l.jsx)(j,{className:"flex h-full",children:(0,l.jsxs)(p.xV,{children:[(0,l.jsx)(p.W4,{asChild:!0,children:(0,l.jsx)(b,{className:"h-full"})}),(0,l.jsx)(p.h_,{children:F.map((e,r)=>(0,l.jsx)(p.Zo,{onClick:()=>{o.R$.emit("setCameraFrameSize",{size:e.value})},children:e.label},r))})]})})]})})}function w(){return(0,l.jsx)("div",{className:"bg-transparent flex justify-center items-center py-8",children:(0,l.jsx)("pre",{className:"text-[10px] font-bold text-foreground text leading-none",children:'                                                                    ||\r\n                                                  __..--".          ||\r\n                                 __..--""`._..--"" . . . .`.        ||\r\n                         __..--"". . . . . . .`. . . . . . .`.      ||\r\n                 __..--"". . . . .`. . . . . . .`. . . . . . .`.   //\r\n         __..--"". . `.  . . . . . .`. . . . . . .`. . . . . . .`.//\r\n  _..--""  . . . . . . `.  . . . . . .`. . . . . . .`. . . . . . .||\r\n:". . . .`.  . . . . . . `.  . . . . . .`. . . . . . .`. . . . . .||`.\r\n`:. . . . .`.  . . . . . . `.  . . . . . .`. . . . . . .`. . . . .||__>\r\n  `:. . . . .`.  . . . . . . `.  . . . . . .`. . . . . . .`.__..-o||\r\n    `:. . . . .`.  . . . . . . `.  . . . . . .`. . . . .`;Y"->.  ""\r\n      `:. . . . .`.  . . . . . . `.  . . . . . .`. . . __.>.:\'\r\n        `:. . . . .`.  . . . . . . `.  . . . . __..--"" ..+"`.\r\n   _..-._ `:. . . . .`.  . . . . . . `.__..--"" ....:::::.|   `.\r\n ."`` \\_--" >:. . . . .`.  . . __..,-|" . ..::::::::::::::`--""-:.\r\n\' ..`\\J.-  "8-`:. . .  __..--"" ...-I  \\ `. `::::::::::::::::::::".\r\n`/\'\\\\88o. ,O \\  `:.--""....:|:::\'\'\'`\'\\ =\'. }-._\'::::::::::::::::::|\r\n8  8|PP|"(:. \\-" ""`:::::::|:::.((::=\'/ .\\""-.:_ \':::::::::::\'\'_.\'  _..\r\n 8  8|::/ \\`::Y  _____`:::::|::::.\\\\[ .\\ "/"..* *"-. \'\'\'__..--"")\\,"".-.\\_\r\n`\\b d/""===\\==V::.--..__`:::|:::::.|,\'*."".:.. "_-.*`.""    _.-"-""\\? "_=``.\r\n\\\\`".`"\' .: :-.::.        `:|:::.\'.\'*.\' __..--""   `.*`:--"".-"?,  .)=""`\\ \\\\\r\n `.``...\'\'_/   ``::      _\\\\--.\'.\'*.\'-""   _..-._ _..>.*;-""@_.-/-" `\\.-"""-.\\\r\n   `-::--"            .-"@"}.\'.\'*.:)     ."\\` \\ \\`.--\'_`-\'     `\\. \\-\'-""-   `.\r\n                     <\\  _...\'*.\'      .\' \\.`\\ `\\ \\\\""         `\\ `\' \' .-.\\   |\r\n                     _\\"" .---\'        -\\. `\\.-"""-.\\           \\`|    ._)/   \'\r\n                   ."\\.`-"\\`.         `\\. \\-\'-""-   `.           \\\\  `---"   /\r\n                 .\' \\.`\\ `\\ \\\\        `\\ `\' \' .-.\\   |            `.       _/\r\n                 -\\. `\\.-"""-.\\        \\`|    ._)/   \'              `-..--"\r\n                `\\. \\-\'-""-   `.        \\\\  `---"   /\r\n                `\\ `\' \' .-.\\   |         `.       _/\r\n                 \\`|    ._)/   \'           `-..--"\r\n                  \\\\  `---"   /\r\n                   `.       _/\r\n'})})}function M(){let[e,r]=(0,f.useState)(!1);return(0,l.jsx)(l.Fragment,{children:e?(0,l.jsx)(Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsx)(g,{onConnectionChange:r})}),(0,l.jsx)(w,{})]})})}},7929:function(e,r,t){"use strict";t.d(r,{Cd:function(){return c},X:function(){return d},bZ:function(){return o}});var n=t(3827),a=t(4090),s=t(7742),l=t(1657);let i=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,r)=>{let{className:t,variant:a,...s}=e;return(0,n.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(i({variant:a}),t),...s})});o.displayName="Alert";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...a})});d.displayName="AlertDescription"},5754:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var n=t(3827),a=t(4090),s=t(9143),l=t(7742),i=t(1657);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:t})),ref:r,...d})});c.displayName="Button"},7815:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},ll:function(){return o}});var n=t(3827),a=t(4090),s=t(1657);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5179:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var n=t(3827),a=t(4090),s=t(1657);let l=a.forwardRef((e,r)=>{let{className:t,type:a,...l}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"},9842:function(e,r,t){"use strict";t.d(r,{_:function(){return c}});var n=t(3827),a=t(4090),s=t(4602),l=t(7742),i=t(1657);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(s.f,{ref:r,className:(0,i.cn)(o(),t),...a})});c.displayName=s.f.displayName}},function(e){e.O(0,[689,800,182,144,41,702,971,69,744],function(){return e(e.s=411)}),_N_E=e.O()}]);